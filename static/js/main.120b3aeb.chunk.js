(this.webpackJsonpunidays=this.webpackJsonpunidays||[]).push([[0],{164:function(e,a,t){e.exports=t.p+"static/media/logo.25bf045c.svg"},165:function(e,a,t){"use strict";t.r(a);var n=t(1),s=t.n(n),r=t(26),l=t.n(r),c=(t(72),t(9)),i=t(6),o=t(8),u=t(20),m=t(22),d=(t(86),t(5)),p=t.n(d),h=t(17),f=t(18),v=t(12),E=t.n(v),b={apiKey:"AIzaSyDRlJC_SV_wCL5eTDxVY24e3mHVGFJLNxg",authDomain:"unidays-3205e.firebaseapp.com",databaseURL:"https://unidays-3205e.firebaseio.com",projectId:"unidays-3205e",storageBucket:"unidays-3205e.appspot.com",messagingSenderId:"127396561143",appId:"1:127396561143:web:a032c8f3b20540fc4e53f2",measurementId:"G-6HPPCPKTZ6"};E.a.initializeApp(b),E.a.analytics();var N=t(33),g=t(32),y=t(34);function w(){var e;(e=console).log.apply(e,arguments)}var x=E.a.functions(),k=E.a.auth(),O=E.a.database().ref("users"),C=E.a.database().ref("vendors"),j=E.a.database().ref("deals"),I=E.a.database().ref("library"),L=function(){function e(a){Object(h.a)(this,e),this.uid=void 0,this.displayName=void 0,this.fUser=void 0,this.isAnonymous=!1,this.uid=a.uid,this.displayName=a.displayName?a.displayName:"",this.fUser=a,this.isAnonymous=this.fUser.isAnonymous}return Object(f.a)(e,[{key:"isVendor",value:function(){return!1}}],[{key:"register",value:function(a){var t,n,s,r;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(t=a.displayName,n=a.email,s=a.password,k.currentUser){l.next=4;break}throw k.signInAnonymously(),new Error("This is weird! Application must start with atleast an anonymous user!");case 4:return r=E.a.auth.EmailAuthProvider.credential(n,s),l.abrupt("return",k.currentUser.linkWithCredential(r).then((function(a){var s;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.user){r.next=2;break}throw new Error("User should not be empty!");case 2:return s=a.user,console.log("Anonymous account successfully upgraded",s),r.next=6,p.a.awrap(s.updateProfile({displayName:t}).then((function(){return O.child(s.uid).set({displayName:t,email:n})})).catch((function(e){throw w(e),s.delete(),new Error("Could not register user!")})));case 6:return r.abrupt("return",new e(s));case 7:case"end":return r.stop()}}))}),(function(e){throw console.log("Error upgrading anonymous account",e),new Error(e.message)})));case 6:case"end":return l.stop()}}))}},{key:"login",value:function(a,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",k.signInWithEmailAndPassword(a,t).then((function(a){if(!a.user)throw new Error("User not found!");return new e(a.user)})).catch((function(e){var a=e.code;throw console.log(e),"auth/wrong-password"===a?new Error("Wrong password."):e})));case 1:case"end":return n.stop()}}))}}]),e}(),S=function(e){function a(e,t){var n;return Object(h.a)(this,a),(n=Object(N.a)(this,Object(g.a)(a).call(this,e))).companyName=void 0,n.companyName=t,n}return Object(y.a)(a,e),Object(f.a)(a,[{key:"isVendor",value:function(){return!0}}],[{key:"register",value:function(e){var t,n,s,r,l,c,i;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.companyName,n=e.displayName,s=e.email,r=e.password,k.currentUser){o.next=4;break}throw k.signInAnonymously(),new Error("This is weird! Application must start with atleast an anonymous user!");case 4:return l=x.httpsCallable("vendorSignup"),o.prev=5,o.next=8,p.a.awrap(l({email:s,password:r,displayName:n,companyName:t}));case 8:if(c=o.sent,console.log(c),c.data.success){o.next=12;break}throw new Error("Something went wrong!");case 12:return o.next=14,p.a.awrap(k.signInWithEmailAndPassword(s,r));case 14:if((i=o.sent).user){o.next=17;break}throw new Error("Something went horribly wrong!");case 17:return o.abrupt("return",new a(i.user,t));case 20:throw o.prev=20,o.t0=o.catch(5),console.error(o.t0),o.t0;case 24:case"end":return o.stop()}}),null,null,[[5,20]])}},{key:"login",value:function(e,t){return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",k.signInWithEmailAndPassword(e,t).then((function(e){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.user){n.next=2;break}throw new Error("User not found!");case 2:return n.next=4,p.a.awrap(new Promise((function(a,t){C.child("".concat(e.user.uid,"/companyName")).once("value",(function(e){if(e.exists())return a(e.val());k.signOut(),t(new Error("Vendor account not found! Did you mean to login as a user?"))}))})));case 4:return t=n.sent,n.abrupt("return",new a(e.user,t));case 6:case"end":return n.stop()}}))})).catch((function(e){var a=e.code;throw console.log(e),"auth/wrong-password"===a?new Error("Wrong password."):e})));case 1:case"end":return n.stop()}}))}}]),a}(L),P={main:{background:"#001",color:"#efefef",minHeight:"100%",overflowY:"scroll",paddingTop:"3.25rem"},level1:{background:"#222"},header:{background:"#353545",color:"#fefefe",boxShadow:"#1a1a1a88 0 1px 0.1em 0.1em"},footer:{padding:"1em",color:"#555"}},T=t(24),D=t.n(T),M=function(){function e(a){Object(h.a)(this,e),this.context=void 0,this.useMock=!0,this.useMock&&console.info("Bail application. Wrong code sent for production!!!!!!"),this.context=a}return Object(f.a)(e,[{key:"getMyDeals",value:function(){var e=this;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(this.context.signedIn()){a.next=2;break}return a.abrupt("return",[]);case 2:if(!this.useMock){a.next=4;break}return a.abrupt("return",z);case 4:return a.next=6,p.a.awrap(new Promise((function(a){I.child("".concat(e.context.user.uid)).on("value",(function(e){var t,n,s,r;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(e.exists()){l.next=2;break}return l.abrupt("return",a([]));case 2:for(s in t=e.val(),console.log(t),n=[],t)r=t[s],n.push(r);return l.abrupt("return",a(n));case 7:case"end":return l.stop()}}))}))})));case 6:return a.abrupt("return",a.sent);case 7:case"end":return a.stop()}}),null,this)}},{key:"getDeals",value:function(e){var a,t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=5,!e){n.next=9;break}if(!this.useMock){n.next=6;break}return t=z.findIndex((function(a){return a.id===e})),console.log(t,e,z),n.abrupt("return",z.slice(t>0?t+1:0,Math.max(t,0)+1+a));case 6:return n.next=8,p.a.awrap(j.orderByKey().limitToLast(a+1).startAt(e).once("value").then((function(a){var t,n,s,r;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(a.exists()){l.next=2;break}return l.abrupt("return",[]);case 2:t=a.val(),console.log("all deals",t),n=[],l.t0=p.a.keys(t);case 6:if((l.t1=l.t0()).done){l.next=14;break}if((s=l.t1.value)!==e){l.next=10;break}return l.abrupt("continue",6);case 10:r=t[s],n.push(r),l.next=6;break;case 14:return l.abrupt("return",n);case 15:case"end":return l.stop()}}))})));case 8:return n.abrupt("return",n.sent);case 9:if(!this.useMock){n.next=11;break}return n.abrupt("return",z.slice(0,a));case 11:return n.next=13,p.a.awrap(j.orderByKey().limitToLast(a).once("value").then((function(e){var a,t,n,s;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.exists()){r.next=2;break}return r.abrupt("return",[]);case 2:for(n in a=e.val(),console.log("all deals",a),t=[],a)s=a[n],t.push(s);return r.abrupt("return",t);case 7:case"end":return r.stop()}}))})));case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),null,this)}},{key:"addDeal",value:function(e){var a;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.context.signedIn()&&this.context.user.isVendor()){t.next=2;break}throw new Error("You are not authorized to create deals!");case 2:return a=Object(v.functions)().httpsCallable("vendorCreateDeal"),t.prev=3,t.next=6,p.a.awrap(a({deal:e}));case 6:if(t.sent.data.success){t.next=9;break}throw new Error("Failed to create deal!");case 9:return t.abrupt("return",!0);case 12:throw t.prev=12,t.t0=t.catch(3),console.error(t.t0),t.t0;case 16:case"end":return t.stop()}}),null,this,[[3,12]])}}],[{key:"isDealValid",value:function(e){if(!e.title||!D.a.isLength(e.title,{min:5}))throw Error("Deal must contain a useful title!");if(!e.description||!D.a.isLength(e.description,{min:10}))throw new Error("Deal must have useful description!");if(!e.value)throw new Error("All deals must have a value!");if(e.cover,e.meta=e.meta||{unit:"Flat"},!e.meta.unit||!D.a.equals(e.meta.unit,"Percent")||!D.a.equals(e.meta.unit,"Flat"))throw new Error("Invalid unit format");if(e.meta.actionUrl&&!D.a.isURL(e.meta.actionUrl,{protocols:["http","https"]}))throw new Error("Url provided is invalid");if(e.meta.expiryDate&&!D.a.isAfter(e.meta.expiryDate.toString()))throw new Error("Invalid expiry date!");return!0}}]),e}(),z=[{id:"11",cover:"fff",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Dominos Pizza"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30,inStore:!0},{id:"12",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Taxify"},description:"Walk in to any store and get these deals in november only",title:"50% off any purchase",value:30,inStore:!0},{id:"13",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"FilmHouse Cinemas"},description:"Test deals spooled by me##",title:"80% off any purchase",value:30},{id:"14",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"14d",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"1s4",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"14dd",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"1s4d",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"14dss",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"1s4ss",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30}],A=new(function(){function e(){var a=this;Object(h.a)(this,e),this.name="My Student Deal",this.description="Bringing the most exciting shopping discounts and deals to students worldwide!",this.version="0.0.1",this.theme=P,this.user=void 0,this.dealMan=void 0,this._isReady=void 0,document.title=this.name,this.dealMan=new M(this),this._isReady=new Promise((function(e){k.onAuthStateChanged((function(t){var n;return p.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=11;break}if(!t.isAnonymous){s.next=6;break}console.log("Anonymous user created",t),a.user=new L(t),s.next=9;break;case 6:if(!a.user||a.user.isAnonymous){s.next=8;break}return s.abrupt("return");case 8:(n=JSON.parse(localStorage.getItem("user_session_")||"{}"))||(k.signOut(),console.log("Anonymous user created",t),a.user=new L(t)),console.log("currently signedin as ",n.companyName,t),a.user=new S(t,n.companyName);case 9:s.next=13;break;case 11:a.user=void 0,a.user||k.signInAnonymously();case 13:e(!0);case 14:case"end":return s.stop()}}))}))}))}return Object(f.a)(e,[{key:"isReady",value:function(){return this._isReady}},{key:"signedIn",value:function(){return this.user&&!this.user.isAnonymous}},{key:"loginStudent",value:function(e){var a=this;return L.login(e.email,e.password).then((function(e){return a.user=e,a}))}},{key:"loginVendor",value:function(e){var a=this;return S.login(e.email,e.password).then((function(e){return a.user=e,localStorage.setItem("user_session_",JSON.stringify({companyName:e.companyName})),a}))}},{key:"registerUser",value:function(e){var a=this;return L.register(e).then((function(e){a.user=e}))}},{key:"registerVendor",value:function(e){var a=this;return S.register(e).then((function(e){a.user=e,localStorage.setItem("user_session_",JSON.stringify({companyName:e.companyName}))}))}},{key:"logout",value:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.awrap(k.signOut());case 2:localStorage.removeItem("user_session_"),this.user&&(this.user=void 0);case 4:case"end":return e.stop()}}),null,this)}},{key:"getVendorCount",value:function(){var e;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=p.a,a.next=3,p.a.awrap(fetch("".concat(b.databaseURL,"/vendors.json?shallow=true")));case 3:return a.t1=a.sent.json(),a.next=6,a.t0.awrap.call(a.t0,a.t1);case 6:if(e=a.sent){a.next=9;break}return a.abrupt("return",0);case 9:return a.abrupt("return",Object.keys(e).length);case 10:case"end":return a.stop()}}))}}]),e}()),V=Object(n.createContext)(A),R=function(){return s.a.createElement(V.Consumer,null,(function(e){return s.a.createElement("footer",{className:"footer",style:e.theme.footer},s.a.createElement("div",{className:"content has-text-centered"},s.a.createElement("p",null,"\xa9 ",(new Date).getFullYear()," ",e.name," ")))}))},U="/deals/transport",q="/deals/fashion",F="/deals/lifestyle",W="/deals/tech",_="/deals",H="/mydeals",J="/user/view",B=t(44),Y=t(7);function G(e){var a=e.hideMenu,t=Object(n.useContext)(V),r=s.a.useState(!1),l=Object(c.a)(r,2),u=l[0],m=l[1];return a?s.a.createElement("nav",{className:"navbar is-centered is-unselectable is-fixed-top is-black",style:t.theme.header},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("span",{className:"navbar-item has-text-weight-bold"},t.name))):s.a.createElement("nav",{className:"navbar is-centered is-unselectable is-fixed-top is-black",style:t.theme.header},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("span",{className:"navbar-item has-text-weight-bold"},t.name),s.a.createElement("span",{onClick:function(){var e=!u;m(e),!0===e&&setTimeout((function(){return m(!1)}),1e4)},className:"navbar-burger burger ".concat(u?"is-active":"")},s.a.createElement("span",null),s.a.createElement("span",null),s.a.createElement("span",null))),s.a.createElement("div",{className:"navbar-menu ".concat(u?"is-active":"")},s.a.createElement("div",{className:"navbar-start"},t.signedIn()?s.a.createElement(o.b,{activeClassName:"is-active",exact:!0,to:H,className:"navbar-item"},s.a.createElement(i.t,null),"\u2003My Deals"):s.a.createElement(o.b,{activeClassName:"is-active",exact:!0,to:"/",className:"navbar-item"},s.a.createElement(i.k,null),"\u2003Home"),s.a.createElement(o.b,{activeClassName:"is-active",exact:!0,to:_,className:"navbar-item"},s.a.createElement(i.p,null),"\xa0 Deals")),s.a.createElement("div",{className:"navbar-end"},t.signedIn()?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"navbar-item"}),s.a.createElement(o.b,{title:"View profile",activeClassName:"is-active",exact:!0,to:J,className:"navbar-item"},s.a.createElement(i.s,null),"\u2003Hello ",t.user.isVendor()?t.user.companyName:t.user.displayName)):null,s.a.createElement("div",{className:"navbar-item"},t.signedIn()?s.a.createElement(o.b,{title:"Logout",activeClassName:"is-active",exact:!0,to:"/".concat(t.user.isVendor()?"vendor":"user","/logout"),className:"is-danger button"},s.a.createElement(i.n,null),"\u2003Logout"):s.a.createElement("div",{className:"field is-grouped is-uppercase"},s.a.createElement("p",{className:"control"},s.a.createElement(o.b,{title:"Login to student portal",activeClassName:"is-active",exact:!0,to:"/user/login",className:"is-primary button"},s.a.createElement(i.m,null),"\u2003Student")),s.a.createElement("p",{className:"control"},s.a.createElement(o.b,{title:"Login to vendor portal!",activeClassName:"is-active",exact:!0,to:"/vendor/login",className:"is-link button"},s.a.createElement(i.a,null),"\u2003Vendor")))))))}var K=t(19),X=t(43),Z=function(){var e={error:null,inStore:"ONLINE",title:"",description:"",value:"",expiryTime:"",expiryDate:"",cover:null,link:"",type:"FLAT",loading:!1},a=Object(n.useState)(e),t=Object(c.a)(a,2),r=t[0],l=t[1];return s.a.createElement("form",{className:"card has-transition-1",onSubmit:function(e){e.preventDefault(),e.stopPropagation()}},s.a.createElement("header",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-uppercase"},"Create New Deal"),s.a.createElement("span",{onClick:function(){return l(e)},className:"card-header-icon has-text-danger is-size-4"}," ",s.a.createElement(X.a,null))),s.a.createElement("div",{className:"card-content"},r.error?s.a.createElement("div",{className:"notification is-warning"},s.a.createElement(i.f,null)," ",r.error):null,s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{value:r.title,onChange:function(e){return l(Object(Y.a)({},r,{title:e.target.value}))},tabIndex:1,className:"input",required:!0,minLength:4,type:"text",placeholder:"Title"}))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"file input"},s.a.createElement("div",{className:"file-label"},s.a.createElement("label",{className:"is-uppercase label ".concat(r.cover?"has-text-success":"has-text-grey")},s.a.createElement(X.b,null)," Select Cover image for deal")),s.a.createElement("input",{onChange:function(e){if(e.target.files&&e.target.files.length>0&&e.target.files[0].size>10){var a=e.target.files[0];l(Object(Y.a)({},r,{cover:a})),console.log(r)}else l(Object(Y.a)({},r,{cover:null}))},className:"file-input",required:!0,tabIndex:2,type:"file",accept:"image/*",alt:"Cover photo for deal"})))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{tabIndex:3,className:"textarea",value:r.description,onChange:function(e){return l(Object(Y.a)({},r,{description:e.target.value}))},required:!0,maxLength:150,rows:2,placeholder:"Describe what this deal has to offer..."}))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control",title:"Select deal availability. This will guide users on where this deal can be applied."},s.a.createElement("div",{className:"select is-fullwidth"},s.a.createElement("select",{tabIndex:4,value:r.inStore,onChange:function(e){return l(Object(Y.a)({},r,{inStore:e.target.value}))}},s.a.createElement("option",{value:"ONLINE"},"Online"),s.a.createElement("option",{value:"STORE"},"Instore"))))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{tabIndex:5,value:r.type,onChange:function(e){return l(Object(Y.a)({},r,{type:e.target.value}))}},s.a.createElement("option",{value:"PERCENT"},"%"),s.a.createElement("option",{value:"FLAT"},"\u20a6")))),s.a.createElement("div",{className:"control is-expanded"},s.a.createElement("input",{tabIndex:6,value:r.value,onChange:function(e){return l(Object(Y.a)({},r,{value:e.target.value}))},className:"input",required:!0,type:"number",placeholder:"Discount or Percentage"}))))),"ONLINE"!==r.inStore?null:s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{type:"text",tabIndex:7,value:r.link,onChange:function(e){return l(Object(Y.a)({},r,{link:e.target.value}))},className:"input",placeholder:"Web URL or Voucher Code"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.j,null)))),s.a.createElement("label",{className:"label is-uppercase has-text-grey"},"Expiry"),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{className:"input",tabIndex:8,value:r.expiryTime,onChange:function(e){return l(Object(Y.a)({},r,{expiryTime:e.target.value}))},type:"time",placeholder:"Time deal will expire"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.c,null)))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{required:!0,name:"date",tabIndex:9,value:r.expiryDate,onChange:function(e){return l(Object(Y.a)({},r,{expiryDate:e.target.value}))},className:"input",type:"date",pattern:"[0-9]{4}/[0-9]{2}/[0-9]{2}"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.b,null)))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"is-fullwidth control"},s.a.createElement("button",{type:"submit",className:"button is-primary is-uppercase ".concat(r.loading?"is-loading":"")},"submit")))))},$=function(){var e=Object(n.useContext)(V);return e.signedIn()?s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"section"},s.a.createElement(Z,null)))):s.a.createElement(u.a,{to:"/"})},Q=function(e){function a(){var e,t;Object(h.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=Object(N.a)(this,(e=Object(g.a)(a)).call.apply(e,[this].concat(s)))).context=void 0,t.state={deals:[],isLoading:!1},t}return Object(y.a)(a,e),Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.context.dealMan.getDeals().then((function(a){e.setState({deals:a})}))}},{key:"render",value:function(){var e=this,a=this.context,t=this.state,n=t.isLoading,r=t.deals;return s.a.createElement("div",{style:a.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"container is-fluid"},s.a.createElement("div",{className:"section is-marginless-horizontal"},s.a.createElement("div",{className:"columns is-multiline"},r.map((function(e){return s.a.createElement("div",{key:e.id,className:"column is-3-widescreen is-4 is-12-mobile"},s.a.createElement(ee,{deal:e}))}))),s.a.createElement("div",{className:"container"},s.a.createElement("button",{type:"button",onClick:function(){var t;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({deals:r,isLoading:!0}),t=window.scrollY,n.t0=r.push,n.t1=r,n.t2=B.a,n.next=7,p.a.awrap(a.dealMan.getDeals(r[r.length-1].id));case 7:n.t3=n.sent,n.t4=(0,n.t2)(n.t3),n.t0.apply.call(n.t0,n.t1,n.t4),e.setState({deals:Object(B.a)(r),isLoading:!1}),window.scroll(window.scrollX,t);case 12:case"end":return n.stop()}}))},className:"button is-outlined is-primary is-uppercase is-fullwidth ".concat(n?"is-loading":"")},"Load More")))))}}]),a}(s.a.PureComponent);Q.contextType=V;var ee=function(e){var a=e.deal;Object(n.useContext)(V);return s.a.createElement("div",{className:"card is-unselectable"},s.a.createElement("div",{className:"card-image"},s.a.createElement("figure",{className:"image is-16by9"},s.a.createElement("img",{src:a.cover||t(164),alt:a.description}))),s.a.createElement("div",{className:"card-content has-text-centered"},s.a.createElement("p",{className:"title is-5"},a.title),s.a.createElement("p",{className:"subtitle is-6"},a.description),s.a.createElement("div",{className:"content"},s.a.createElement(o.b,{className:"button is-medium is-success is-outlined",to:"/deals/view/".concat(a.id)},s.a.createElement(K.f,null),"\xa0 Get Deal")),s.a.createElement("div",{className:"media"},s.a.createElement("div",{className:"media-content"},s.a.createElement("p",{className:"title is-6"},s.a.createElement(K.e,null)," ",a.author.CompanyName),s.a.createElement("p",{className:"subtitle tags"},s.a.createElement("span",{className:"tag ".concat(a.inStore?"is-primary":"is-link")},a.inStore?s.a.createElement(s.a.Fragment,null,s.a.createElement(i.o,null),"\xa0 instore"):s.a.createElement(s.a.Fragment,null,s.a.createElement(i.d,null),"\xa0 online")))))))};function ae(e){return s.a.createElement(V.Consumer,null,(function(a){return s.a.createElement("div",{style:a.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"hero is-black is-bold is-fullheight"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container notification has-text-centered",style:a.theme.level1},s.a.createElement(i.g,{size:50,className:"has-text-warning"}),s.a.createElement("p",{className:"title is-uppercase"}," ",e.children||"Page Not Found!"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(o.b,{to:e.redirect||"/",className:"button is-danger is-outlined"},e.redirectText||"Go to Homepage!")))))}))}var te=function(){var e=Object(n.useContext)(V),a=s.a.useState(0),t=Object(c.a)(a,2),r=t[0],l=t[1];if(e.signedIn())return s.a.createElement(u.a,{to:H});return e.getVendorCount().then((function(e){return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=setInterval((function(){if(e!==r){var n=r+a;n>e?(l(e),clearInterval(t)):l(n)}else clearInterval(t)}),Math.max(Math.ceil(e/a)),0)}(e)})),s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"hero is-fullheight is-light is-bold"},s.a.createElement("div",{className:"hero-body has-text-centered has-background"},s.a.createElement("div",{className:"container"},s.a.createElement("p",{className:"title has-text-weight-bold is-2"},"Welcome to ",e.name),s.a.createElement("p",{className:"subtitle"},e.description)))),s.a.createElement("div",{className:"hero is-medium is-primary is-bold"},s.a.createElement("div",{className:"hero-body has-text-centered"},s.a.createElement("div",{className:"container"},s.a.createElement("p",{className:"title is-capitalized"},"Gain access to thousands of great student discounts!"),s.a.createElement("div",{className:"tile is-ancestor section"},s.a.createElement(o.b,{to:q,className:"tile is-parent"},s.a.createElement("div",{className:"tile is-child box"},s.a.createElement(K.c,{className:"is-size-1"}),s.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Fashion"))),s.a.createElement(o.b,{to:W,className:"tile is-parent"},s.a.createElement("div",{className:"tile is-child box"},s.a.createElement(K.d,{className:"is-size-1"}),s.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Technology"))),s.a.createElement(o.b,{to:U,className:"tile is-parent"},s.a.createElement("div",{className:"tile is-child box"},s.a.createElement(K.a,{className:"is-size-1"}),s.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Transportation"))),s.a.createElement(o.b,{to:F,className:"tile is-parent"},s.a.createElement("div",{className:"tile is-child box"},s.a.createElement(K.b,{className:"is-size-1"}),s.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Events & Lifestyle"))))))),s.a.createElement("div",{className:"hero is-medium is-dark"},s.a.createElement("div",{className:"hero-body has-text-centered"},s.a.createElement("div",{className:"container"},s.a.createElement(K.e,{className:"is-size-1"}),s.a.createElement("p",{className:"subtitle"},"Vendors Registered"),s.a.createElement("p",{className:"title has-text-weight-bold is-1"},r)))))},ne=["Contacting Mothership...","Configuring Defences...","Loading...","Ready In A Minute...","Launching..."],se=function(){var e=Object(n.useContext)(V),a=Object(n.useState)(ne[Math.round(Math.random()*ne.length)%ne.length]),t=Object(c.a)(a,2),r=t[0],l=t[1],i=setInterval((function(){i&&clearInterval(i),l(ne[Math.round(Math.random()*ne.length)%ne.length])}),2e3);return Object(n.useEffect)((function(){return function(){clearInterval(i)}})),s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,{hideMenu:!0}),s.a.createElement("div",{className:"hero is-fullheight is-black is-bold"},s.a.createElement("div",{className:"hero-body has-text-centered"},s.a.createElement("div",{className:"container"},s.a.createElement("p",{className:"title has-text-weight-bold is-2"},"Welcome to ",e.name),s.a.createElement("p",{className:"subtitle"},e.description),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("div",{className:"section"},s.a.createElement("p",{className:"subtitle"},r),s.a.createElement("progress",{className:"progress is-small is-info",max:"100"},"loading"))))))},re=function(e){var a=e.redirectPath,t=e.registerPath,n=e.onLogin,r=s.a.useState({error:null,email:"",password:"",isLoading:!1}),l=Object(c.a)(r,2),d=l[0],p=l[1],h=s.a.useState(!1),f=Object(c.a)(h,2),v=f[0],E=f[1],b=s.a.useState(!1),N=Object(c.a)(b,2),g=N[0],y=N[1],w=Object(m.useToasts)().addToast;return s.a.createElement(V.Consumer,null,(function(e){return s.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),p(Object(Y.a)({},d,{isLoading:!0})),n(d).then((function(){return console.log("login success"),w("Login Success!",{appearance:"success",autoDismiss:!0}),p(Object(Y.a)({},d,{isLoading:!1})),y(!0)})).catch((function(e){p(Object(Y.a)({},d,{isLoading:!1,error:e.message}))}))}},g?s.a.createElement(u.a,{to:a}):null,s.a.createElement("div",{className:"card"},s.a.createElement("section",{className:"card-content"},d.error?s.a.createElement("div",{className:"notification is-warning"},s.a.createElement(i.f,null)," ",d.error):null,s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Email")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{required:!0,name:"email",value:d.email,onChange:function(e){return p(Object(Y.a)({},d,{email:e.target.value}))},className:"input",type:"email",placeholder:"Enter email address"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.e,null)))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Password")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control is-expanded"},s.a.createElement("input",{required:!0,name:"password",value:d.password,onChange:function(e){return p(Object(Y.a)({},d,{password:e.target.value}))},className:"input",type:v?"text":"password"})),s.a.createElement("p",{className:"control"},s.a.createElement("button",{tabIndex:-1,type:"button",className:"button",onClick:function(){return E(!v)}},v?s.a.createElement(i.i,null):s.a.createElement(i.h,null)))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",className:"is-success button ".concat(d.isLoading?"is-loading":""),disabled:d.isLoading},"Login")))),s.a.createElement("footer",{className:"card-footer is-unselectable"},s.a.createElement(o.b,{to:t,exact:!0,className:"card-footer-item"},"Create New Account"))))}))},le=function(e){var a=e.redirectPath,t=e.onRegister,n=e.vendor,r=e.loginPath,l=s.a.useState({error:"",email:"",password:"",passwordVerify:"",isLoading:!1,showPassword:!1,displayName:"",companyName:""}),d=Object(c.a)(l,2),p=d[0],h=d[1],f=Object(m.useToasts)().addToast,v=s.a.useState(!1),E=Object(c.a)(v,2),b=E[0],N=E[1];return s.a.createElement(V.Consumer,null,(function(e){return s.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),p.password!==p.passwordVerify)return h(Object(Y.a)({},p,{error:"Passwords do not match!"}));h(Object(Y.a)({},p,{isLoading:!0})),t(p).then((function(){return f("Registration Success!",{appearance:"success",autoDismiss:!0}),h(Object(Y.a)({},p,{isLoading:!1})),N(!0)})).catch((function(e){h(Object(Y.a)({},p,{isLoading:!1,error:e.message}))}))}},b?s.a.createElement(u.a,{to:a}):null,s.a.createElement("div",{className:"card"},s.a.createElement("section",{className:"card-content"},p.error?s.a.createElement("div",{className:"notification is-warning"},s.a.createElement(i.f,null)," ",p.error):null,n?s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Company Name")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{required:!0,name:"companyname",value:p.companyName,onChange:function(e){return h(Object(Y.a)({},p,{companyName:e.target.value}))},className:"input",type:"text",placeholder:"Enter company name"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.a,null)))))):null,s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Name")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{required:!0,name:"name",value:p.displayName,onChange:function(e){return h(Object(Y.a)({},p,{displayName:e.target.value}))},className:"input",type:"person",placeholder:"Enter your fullname"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.r,null)))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Email")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control has-icons-left"},s.a.createElement("input",{required:!0,name:"email",value:p.email,onChange:function(e){return h(Object(Y.a)({},p,{email:e.target.value}))},className:"input",type:"email",placeholder:"Enter email address"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.e,null)))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Password")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field has-addons"},s.a.createElement("p",{className:"control is-expanded has-icons-left"},s.a.createElement("input",{required:!0,name:"password",value:p.password,onChange:function(e){return h(Object(Y.a)({},p,{password:e.target.value}))},className:"input",type:p.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.l,null))),s.a.createElement("p",{className:"control"},s.a.createElement("button",{disabled:p.isLoading,tabIndex:-1,className:"button",type:"button",onClick:function(){return h(Object(Y.a)({},p,{showPassword:!p.showPassword}))}},p.showPassword?s.a.createElement(i.i,null):s.a.createElement(i.h,null)))))),s.a.createElement("div",{className:"field is-horizontal"},s.a.createElement("div",{className:"field-label"},s.a.createElement("label",{className:"label"},"Confirm Password")),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{required:!0,name:"password",value:p.passwordVerify,onChange:function(e){return h(Object(Y.a)({},p,{passwordVerify:e.target.value}))},className:"input",type:p.showPassword?"text":"password"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement(i.l,null)))))),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",className:"is-success button ".concat(p.isLoading?"is-loading":""),disabled:p.isLoading},"Join")))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement(o.b,{to:r,exact:!0,className:"card-footer-item"},"Login with existing account"))))}))},ce=function(){return s.a.createElement(V.Consumer,null,(function(e){return s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"section container"},s.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Login with username and password"),s.a.createElement("div",{className:"section"},s.a.createElement(re,{onLogin:function(a){return e.loginStudent(a)},redirectPath:"/",registerPath:"/user/register"}))))}))},ie=function(){return s.a.createElement(V.Consumer,null,(function(e){return s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"section container"},s.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Login with username and password"),s.a.createElement("div",{className:"section"},s.a.createElement(re,{onLogin:function(a){return e.loginVendor(a)},redirectPath:"/",registerPath:"/vendor/register"}))))}))},oe=function(){var e=Object(n.useContext)(V),a=Object(n.useState)(!0),t=Object(c.a)(a,2),r=t[0],l=t[1];return e.signedIn(),e.logout().then((function(){return l(!1)})),s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"section container"},s.a.createElement("div",{className:"section"},s.a.createElement("div",{className:"hero is-fullheight"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("h2",{className:"is-title is-size-2"},"Thank you for using ",e.name,"!"),r?s.a.createElement("progress",{className:"progress is-small is-info",max:"100"},"loading..."):null)))))},ue=function(){return s.a.createElement(V.Consumer,null,(function(e){return s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"section container"},s.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Create a new account"),s.a.createElement("div",{className:"section"},s.a.createElement(le,{onRegister:function(a){return e.registerUser(a)},redirectPath:"/",loginPath:"/user/login"}))))}))},me=function(){return s.a.createElement(V.Consumer,null,(function(e){return s.a.createElement("div",{style:e.theme.main},s.a.createElement(G,null),s.a.createElement("div",{className:"section container"},s.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Create a new vendor account"),s.a.createElement("div",{className:"section"},s.a.createElement(le,{vendor:!0,onRegister:function(a){return e.registerVendor(a)},redirectPath:"/",loginPath:"/vendor/login"}))))}))},de=function(){var e=Object(n.useState)(!1),a=Object(c.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(navigator.onLine),d=Object(c.a)(l,2),p=d[0],h=d[1],f=Object(m.useToasts)().addToast;return window.onoffline=function(){p&&(h(!1),f("You are offline!",{appearance:"warning",autoDismiss:!0,pauseOnHover:!0}))},window.ononline=function(){p||(h(!0),f(s.a.createElement("p",null,"Welcome back to the Internet \xa0",s.a.createElement(i.q,null)),{appearance:"info",autoDismiss:!0,pauseOnHover:!0}))},s.a.createElement(V.Provider,{value:A},s.a.createElement(V.Consumer,null,(function(e){return e.isReady().then((function(e){return r(e)})),s.a.createElement(o.a,{basename:"/deals"},t?s.a.createElement(s.a.Fragment,null,s.a.createElement(u.d,null,s.a.createElement(u.b,{strict:!0,exact:!0,path:"deals/view/:id",component:ae}),s.a.createElement(u.b,{strict:!0,exact:!0,path:_,component:Q}),s.a.createElement(u.b,{strict:!0,exact:!0,path:H,component:$}),s.a.createElement(u.b,{strict:!0,exact:!0,path:"/vendor/register",component:me}),s.a.createElement(u.b,{strict:!0,exact:!0,path:"/user/register",component:ue}),s.a.createElement(u.b,{strict:!0,exact:!0,path:"/vendor/login",component:ie}),s.a.createElement(u.b,{strict:!0,exact:!0,path:"/user/login",component:ce}),s.a.createElement(u.b,{strict:!0,exact:!0,path:"/:user/logout",component:oe}),s.a.createElement(u.b,{strict:!0,exact:!0,path:"/",component:te}),s.a.createElement(u.b,{component:ae})),s.a.createElement(R,null)):s.a.createElement(se,null))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(m.ToastProvider,{placement:"bottom-center"},s.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},67:function(e,a,t){e.exports=t(165)},72:function(e,a,t){},86:function(e,a,t){}},[[67,1,2]]]);
//# sourceMappingURL=main.120b3aeb.chunk.js.map