(this.webpackJsonpunidays=this.webpackJsonpunidays||[]).push([[0],{49:function(e,t,a){e.exports=a(83)},54:function(e,t,a){},55:function(e,t,a){},82:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},83:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(23),c=a.n(s),i=(a(54),a(9)),l=(a(55),a(4)),o=a.n(l),u=a(7),m=a(17),d=a(18),p=a(13),f=a.n(p),h={apiKey:"AIzaSyDRlJC_SV_wCL5eTDxVY24e3mHVGFJLNxg",authDomain:"unidays-3205e.firebaseapp.com",databaseURL:"https://unidays-3205e.firebaseio.com",projectId:"unidays-3205e",storageBucket:"unidays-3205e.appspot.com",messagingSenderId:"127396561143",appId:"1:127396561143:web:a032c8f3b20540fc4e53f2",measurementId:"G-6HPPCPKTZ6"};f.a.initializeApp(h),f.a.analytics();var v=a(28),E=a(27),b=a(29);function g(){var e;(e=console).log.apply(e,arguments)}var N=f.a.auth(),y=f.a.database().ref("users"),w=f.a.database().ref("vendors"),x=f.a.database().ref("deals"),k=f.a.database().ref("library"),O=function(){function e(t){Object(m.a)(this,e),this.uid=void 0,this.displayName=void 0,this.fUser=void 0,this.isAnonymous=!1,this.uid=t.uid,this.displayName=t.displayName?t.displayName:"",this.fUser=t,this.isAnonymous=this.fUser.isAnonymous}return Object(d.a)(e,[{key:"isVendor",value:function(){return!1}}],[{key:"register",value:function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.displayName,r=a.email,s=a.password,N.currentUser){t.next=4;break}throw N.signInAnonymously(),new Error("This is weird! Application must start with atleast an anonymous user!");case 4:return c=f.a.auth.EmailAuthProvider.credential(r,s),t.abrupt("return",N.currentUser.linkWithCredential(c).then(function(){var t=Object(u.a)(o.a.mark((function t(a){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.user){t.next=2;break}throw new Error("User should not be empty!");case 2:return s=a.user,console.log("Anonymous account successfully upgraded",s),t.next=6,s.updateProfile({displayName:n}).then((function(){return y.child(s.uid).set({displayName:n,email:r})})).catch((function(e){throw g(e),s.delete(),new Error("Could not register user!")}));case 6:return t.abrupt("return",new e(s));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){throw console.log("Error upgrading anonymous account",e),new Error(e.message)})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"login",value:function(){var t=Object(u.a)(o.a.mark((function t(a,n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",N.signInWithEmailAndPassword(a,n).then((function(t){if(!t.user)throw new Error("User not found!");return new e(t.user)})).catch((function(e){var t=e.code;throw console.log(e),"auth/wrong-password"===t?new Error("Wrong password."):e})));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}]),e}(),j=function(e){function t(e,a){var n;return Object(m.a)(this,t),(n=Object(v.a)(this,Object(E.a)(t).call(this,e))).companyName=void 0,n.companyName=a,n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"isVendor",value:function(){return!0}}],[{key:"register",value:function(){var e=Object(u.a)(o.a.mark((function e(a){var n,r,s,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.companyName,r=a.displayName,s=a.email,c=a.password,N.currentUser){e.next=4;break}throw N.signInAnonymously(),new Error("This is weird! Application must start with atleast an anonymous user!");case 4:return i=f.a.auth.EmailAuthProvider.credential(s,c),e.abrupt("return",N.currentUser.linkWithCredential(i).then(function(){var e=Object(u.a)(o.a.mark((function e(a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.user){e.next=2;break}throw new Error("User should not be empty!");case 2:return c=a.user,console.log("Anonymous account successfully upgraded",c),e.next=6,c.updateProfile({displayName:r}).then((function(){return w.child(c.uid).set({displayName:r,email:s,companyName:n})})).catch((function(e){throw g(e),c.delete(),new Error("Could not register vendor!")}));case 6:return e.abrupt("return",new t(c,n));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){throw console.log("Error upgrading anonymous account",e),new Error(e.message||"Failed to register account!")})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(u.a)(o.a.mark((function e(a,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.signInWithEmailAndPassword(a,n).then(function(){var e=Object(u.a)(o.a.mark((function e(a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.user){e.next=2;break}throw new Error("User not found!");case 2:return e.next=4,new Promise((function(e,t){w.child("".concat(a.user.uid,"/companyName")).once("value",(function(a){if(a.exists())return e(a.val());N.signOut(),t(new Error("Vendor account not found! Did you mean to login as a user?"))}))}));case 4:return n=e.sent,e.abrupt("return",new t(a.user,n));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.code;throw console.log(e),"auth/wrong-password"===t?new Error("Wrong password."):e})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}]),t}(O),C={main:{background:"#001",color:"#efefef",minHeight:"100%",overflowY:"scroll",paddingTop:"3.25rem"},level1:{background:"#222"},header:{background:"#353545",color:"#fefefe",boxShadow:"#1a1a1a88 0 1px 0.1em 0.1em"},footer:{padding:"1em",color:"#555"}},P=function(){function e(t){Object(m.a)(this,e),this.context=void 0,this.useMock=!0,this.useMock&&console.info("Bail application. Wrong code sent for production!!!!!!"),this.context=t}return Object(d.a)(e,[{key:"getMyDeals",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context.signedIn()){e.next=2;break}return e.abrupt("return",[]);case 2:if(!this.useMock){e.next=4;break}return e.abrupt("return",L);case 4:return e.next=6,new Promise((function(e){k.child("".concat(t.context.user.uid)).on("value",function(){var t=Object(u.a)(o.a.mark((function t(a){var n,r,s,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.exists()){t.next=2;break}return t.abrupt("return",e([]));case 2:for(s in n=a.val(),console.log(n),r=[],n)c=n[s],r.push(c);return t.abrupt("return",e(r));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDeals",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=5,!t){e.next=9;break}if(!this.useMock){e.next=6;break}return n=L.findIndex((function(e){return e.id===t})),console.log(n,t,L),e.abrupt("return",L.slice(n>0?n+1:0,Math.max(n,0)+1+a));case 6:return e.next=8,x.orderByKey().limitToLast(a).startAt(t).once("value").then(function(){var e=Object(u.a)(o.a.mark((function e(a){var n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.exists()){e.next=2;break}return e.abrupt("return",[]);case 2:n=a.val(),console.log("all deals",n),r=[],e.t0=o.a.keys(n);case 6:if((e.t1=e.t0()).done){e.next=14;break}if((s=e.t1.value)!==t){e.next=10;break}return e.abrupt("continue",6);case 10:c=n[s],r.push(c),e.next=6;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return e.abrupt("return",e.sent);case 9:if(!this.useMock){e.next=11;break}return e.abrupt("return",L.slice(0,a));case 11:return e.next=13,x.orderByKey().limitToLast(a).once("value").then(function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.exists()){e.next=2;break}return e.abrupt("return",[]);case 2:for(r in a=t.val(),console.log("all deals",a),n=[],a)s=a[r],n.push(s);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addDeal",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.context.signedIn()&&this.context.user.isVendor()){e.next=2;break}throw new Error("You are not authorized to create deals!");case 2:return e.prev=2,e.next=5,x.push();case 5:if(!(a=e.sent).key){e.next=14;break}return t.id=a.key,t.author.id=this.context.user.uid,e.next=11,a.set(t);case 11:return e.abrupt("return",t);case 14:throw new Error("Creation Failed!");case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(2),console.log(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),L=[{id:"11",cover:"fff",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Dominos Pizza"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30,inStore:!0},{id:"12",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Taxify"},description:"Walk in to any store and get these deals in november only",title:"50% off any purchase",value:30,inStore:!0},{id:"13",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"FilmHouse Cinemas"},description:"Test deals spooled by me##",title:"80% off any purchase",value:30},{id:"14",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"14d",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"1s4",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"14dd",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"1s4d",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"14dss",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30},{id:"1s4ss",author:{id:"dsdusdsdusudsdusdsuds",CompanyName:"Microsoft"},description:"Test deals spooled by me##",title:"30% off any purchase",value:30}];g(h);var S=new(function(){function e(){var t=this;Object(m.a)(this,e),this.name="My Student Deal",this.description="Bringing the most exciting shopping discounts and deals to students worldwide!",this.version="0.0.1",this.theme=C,this.user=void 0,this.dealMan=void 0,this._isReady=void 0,document.title=this.name,this.dealMan=new P(this),this._isReady=new Promise((function(e){N.onAuthStateChanged((function(a){a?a.isAnonymous?(console.log("Anonymous user created",a),t.user=new O(a)):(console.log("currently signedin as ",a.displayName),t.user=new O(a)):(t.user=void 0,t.user||N.signInAnonymously()),e(!0)}))}))}return Object(d.a)(e,[{key:"isReady",value:function(){return this._isReady}},{key:"signedIn",value:function(){return this.user&&!this.user.isAnonymous}},{key:"loginStudent",value:function(e){var t=this;return O.login(e.email,e.password).then((function(e){return t.user=e,t}))}},{key:"loginVendor",value:function(e){var t=this;return j.login(e.email,e.password).then((function(e){return t.user=e,t}))}},{key:"registerUser",value:function(e){var t=this;return O.register(e).then((function(e){t.user=e}))}},{key:"registerVendor",value:function(e){var t=this;return j.register(e).then((function(e){t.user=e}))}},{key:"logout",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.user){e.next=5;break}return this.user=void 0,e.next=4,N.signOut();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVendorCount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h.databaseURL,"/vendors.json?shallow=true"));case 2:return e.next=4,e.sent.json();case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",0);case 7:return e.abrupt("return",Object.keys(t).length);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),T=Object(n.createContext)(S),D=a(6),M=a(15),I=a(20),z=a(5),A={Transport:"/deals/transport",Fashion:"/deals/fashion",LifeStyle:"/deals/lifestyle",Technology:"/deals/tech",deals:"/deals",myDeals:"/mydeals",profile:"/user/view"};function V(e){var t=e.hideMenu,a=Object(n.useContext)(T),s=r.a.useState(!1),c=Object(i.a)(s,2),l=c[0],o=c[1];return t?r.a.createElement("nav",{className:"navbar is-centered is-unselectable is-fixed-top is-black",style:a.theme.header},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("span",{className:"navbar-item has-text-weight-bold"},a.name))):r.a.createElement("nav",{className:"navbar is-centered is-unselectable is-fixed-top is-black",style:a.theme.header},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement("span",{className:"navbar-item has-text-weight-bold"},a.name),r.a.createElement("span",{onClick:function(){var e=!l;o(e),!0===e&&setTimeout((function(){return o(!1)}),1e4)},className:"navbar-burger burger ".concat(l?"is-active":"")},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))),r.a.createElement("div",{className:"navbar-menu ".concat(l?"is-active":"")},r.a.createElement("div",{className:"navbar-start"},a.signedIn()?r.a.createElement(D.b,{activeClassName:"is-active",exact:!0,to:A.myDeals,className:"navbar-item"},r.a.createElement(z.q,null),"\u2003My Deals"):r.a.createElement(D.b,{activeClassName:"is-active",exact:!0,to:"/",className:"navbar-item"},r.a.createElement(z.h,null),"\u2003Home"),r.a.createElement(D.b,{activeClassName:"is-active",exact:!0,to:A.deals,className:"navbar-item"},r.a.createElement(z.m,null),"\xa0 Deals")),r.a.createElement("div",{className:"navbar-end"},a.signedIn()?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar-item"}),r.a.createElement(D.b,{title:"View profile",activeClassName:"is-active",exact:!0,to:A.profile,className:"navbar-item"},r.a.createElement(z.p,null),"\u2003Hello ",a.user.displayName,"!")):null,r.a.createElement("div",{className:"navbar-item"},a.signedIn()?r.a.createElement(D.b,{title:"Logout",activeClassName:"is-active",exact:!0,to:"/".concat(a.user.isVendor()?"vendor":"user","/logout"),className:"is-danger button"},r.a.createElement(z.k,null),"\u2003Logout"):r.a.createElement("div",{className:"field is-grouped is-uppercase"},r.a.createElement("p",{className:"control"},r.a.createElement(D.b,{title:"Login to student portal",activeClassName:"is-active",exact:!0,to:"/user/login",className:"is-primary button"},r.a.createElement(z.j,null),"\u2003Student")),r.a.createElement("p",{className:"control"},r.a.createElement(D.b,{title:"Login to vendor portal!",activeClassName:"is-active",exact:!0,to:"/vendor/login",className:"is-link button"},r.a.createElement(z.a,null),"\u2003Vendor")))))))}function U(){return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"hero is-black is-bold is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("div",{className:"container notification has-text-centered",style:e.theme.level1},r.a.createElement(z.e,{size:50,className:"has-text-warning"}),r.a.createElement("p",{className:"title is-uppercase"}," Page Not Found!"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(D.b,{to:"/",className:"button is-danger is-outlined"},"Go to Homepage!")))))}))}var F=a(19),R=function(){var e=Object(n.useContext)(T),t=r.a.useState(0),a=Object(i.a)(t,2),s=a[0],c=a[1];if(e.signedIn())return r.a.createElement(M.a,{to:A.myDeals});return e.getVendorCount().then((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=setInterval((function(){if(e!==s){var n=s+t;n>e?(c(e),clearInterval(a)):c(n)}else clearInterval(a)}),Math.max(Math.ceil(e/t)),0)}(e)})),r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"hero is-fullheight is-light is-bold"},r.a.createElement("div",{className:"hero-body has-text-centered"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title has-text-weight-bold is-2"},"Welcome to ",e.name),r.a.createElement("p",{className:"subtitle"},e.description)))),r.a.createElement("div",{className:"hero is-medium is-primary is-bold"},r.a.createElement("div",{className:"hero-body has-text-centered"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title is-capitalized"},"Gain access to thousands of great student discounts!"),r.a.createElement("div",{className:"tile is-ancestor section"},r.a.createElement(D.b,{to:A.Fashion,className:"tile is-parent"},r.a.createElement("div",{className:"tile is-child box"},r.a.createElement(F.c,{className:"is-size-1"}),r.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Fashion"))),r.a.createElement(D.b,{to:A.Technology,className:"tile is-parent"},r.a.createElement("div",{className:"tile is-child box"},r.a.createElement(F.d,{className:"is-size-1"}),r.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Technology"))),r.a.createElement(D.b,{to:A.Transport,className:"tile is-parent"},r.a.createElement("div",{className:"tile is-child box"},r.a.createElement(F.a,{className:"is-size-1"}),r.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Transportation"))),r.a.createElement(D.b,{to:A.LifeStyle,className:"tile is-parent"},r.a.createElement("div",{className:"tile is-child box"},r.a.createElement(F.b,{className:"is-size-1"}),r.a.createElement("p",{className:"subtitle has-text-black has-text-weight-bold"},"Events & Lifestyle"))))))),r.a.createElement("div",{className:"hero is-medium is-dark"},r.a.createElement("div",{className:"hero-body has-text-centered"},r.a.createElement("div",{className:"container"},r.a.createElement(F.e,{className:"is-size-1"}),r.a.createElement("p",{className:"subtitle"},"Vendors Registered"),r.a.createElement("p",{className:"title has-text-weight-bold is-1"},s)))))},W=function(){return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("footer",{className:"footer",style:e.theme.footer},r.a.createElement("div",{className:"content has-text-centered"},r.a.createElement("p",null,"Copyright \xa9 ",e.name," ",(new Date).getFullYear()," ")))}))},q=a(48);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(q.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=function(e){var t=e.redirectPath,a=e.registerPath,n=e.onLogin,s=r.a.useState({error:null,email:"",password:"",isLoading:!1}),c=Object(i.a)(s,2),l=c[0],o=c[1],u=r.a.useState(!1),m=Object(i.a)(u,2),d=m[0],p=m[1],f=r.a.useState(!1),h=Object(i.a)(f,2),v=h[0],E=h[1],b=Object(I.useToasts)().addToast;return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),o(H({},l,{isLoading:!0})),n(l).then((function(){return console.log("login success"),b("Login Success!",{appearance:"success",autoDismiss:!0}),o(H({},l,{isLoading:!1})),E(!0)})).catch((function(e){o(H({},l,{isLoading:!1,error:e.message}))}))}},v?r.a.createElement(M.a,{to:t}):null,r.a.createElement("div",{className:"card"},r.a.createElement("section",{className:"card-content"},l.error?r.a.createElement("div",{className:"notification is-warning"},r.a.createElement(z.d,null)," ",l.error):null,r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"},r.a.createElement("label",{className:"label"},"Email")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{required:!0,name:"email",value:l.email,onChange:function(e){return o(H({},l,{email:e.target.value}))},className:"input",type:"email",placeholder:"Enter email address"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement(z.c,null)))))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"},r.a.createElement("label",{className:"label"},"Password")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("p",{className:"control is-expanded"},r.a.createElement("input",{required:!0,name:"password",value:l.password,onChange:function(e){return o(H({},l,{password:e.target.value}))},className:"input",type:d?"text":"password"})),r.a.createElement("p",{className:"control"},r.a.createElement("button",{tabIndex:-1,type:"button",className:"button",onClick:function(){return p(!d)}},d?r.a.createElement(z.g,null):r.a.createElement(z.f,null)))))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"is-success button ".concat(l.isLoading?"is-loading":""),disabled:l.isLoading},"Login")))),r.a.createElement("footer",{className:"card-footer is-unselectable"},r.a.createElement(D.b,{to:a,exact:!0,className:"card-footer-item"},"Create New Account"))))}))},G=function(e){var t=e.redirectPath,a=e.onRegister,n=e.vendor,s=e.loginPath,c=r.a.useState({error:"",email:"",password:"",passwordVerify:"",isLoading:!1,showPassword:!1,displayName:"",companyName:""}),l=Object(i.a)(c,2),o=l[0],u=l[1],m=Object(I.useToasts)().addToast,d=r.a.useState(!1),p=Object(i.a)(d,2),f=p[0],h=p[1];return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),o.password!==o.passwordVerify)return u(H({},o,{error:"Passwords do not match!"}));u(H({},o,{isLoading:!0})),a(o).then((function(){return m("Registration Success!",{appearance:"success",autoDismiss:!0}),u(H({},o,{isLoading:!1})),h(!0)})).catch((function(e){u(H({},o,{isLoading:!1,error:e.message}))}))}},f?r.a.createElement(M.a,{to:t}):null,r.a.createElement("div",{className:"card"},r.a.createElement("section",{className:"card-content"},o.error?r.a.createElement("div",{className:"notification is-warning"},r.a.createElement(z.d,null)," ",o.error):null,n?r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"},r.a.createElement("label",{className:"label"},"Company Name")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{required:!0,name:"companyname",value:o.companyName,onChange:function(e){return u(H({},o,{companyName:e.target.value}))},className:"input",type:"text",placeholder:"Enter company name"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement(z.a,null)))))):null,r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"},r.a.createElement("label",{className:"label"},"Name")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{required:!0,name:"name",value:o.displayName,onChange:function(e){return u(H({},o,{displayName:e.target.value}))},className:"input",type:"person",placeholder:"Enter your fullname"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement(z.o,null)))))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"},r.a.createElement("label",{className:"label"},"Email")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control has-icons-left"},r.a.createElement("input",{required:!0,name:"email",value:o.email,onChange:function(e){return u(H({},o,{email:e.target.value}))},className:"input",type:"email",placeholder:"Enter email address"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement(z.c,null)))))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"},r.a.createElement("label",{className:"label"},"Password")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field has-addons"},r.a.createElement("p",{className:"control is-expanded has-icons-left"},r.a.createElement("input",{required:!0,name:"password",value:o.password,onChange:function(e){return u(H({},o,{password:e.target.value}))},className:"input",type:o.showPassword?"text":"password"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement(z.i,null))),r.a.createElement("p",{className:"control"},r.a.createElement("button",{disabled:o.isLoading,tabIndex:-1,className:"button",type:"button",onClick:function(){return u(H({},o,{showPassword:!o.showPassword}))}},o.showPassword?r.a.createElement(z.g,null):r.a.createElement(z.f,null)))))),r.a.createElement("div",{className:"field is-horizontal"},r.a.createElement("div",{className:"field-label"},r.a.createElement("label",{className:"label"},"Confirm Password")),r.a.createElement("div",{className:"field-body"},r.a.createElement("div",{className:"field"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{required:!0,name:"password",value:o.passwordVerify,onChange:function(e){return u(H({},o,{passwordVerify:e.target.value}))},className:"input",type:o.showPassword?"text":"password"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement(z.i,null)))))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{type:"submit",className:"is-success button ".concat(o.isLoading?"is-loading":""),disabled:o.isLoading},"Join")))),r.a.createElement("footer",{className:"card-footer"},r.a.createElement(D.b,{to:s,exact:!0,className:"card-footer-item"},"Login with existing account"))))}))},J=function(){return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"section container"},r.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Login with username and password"),r.a.createElement("div",{className:"section"},r.a.createElement(Y,{onLogin:function(t){return e.loginStudent(t)},redirectPath:"/",registerPath:"/user/register"}))))}))},_=function(){return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"section container"},r.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Login with username and password"),r.a.createElement("div",{className:"section"},r.a.createElement(Y,{onLogin:function(t){return e.loginVendor(t)},redirectPath:"/",registerPath:"/vendor/register"}))))}))},K=function(){return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"section container"},r.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Create a new account"),r.a.createElement("div",{className:"section"},r.a.createElement(G,{onRegister:function(t){return e.registerUser(t)},redirectPath:"/",loginPath:"/user/login"}))))}))},X=function(){return r.a.createElement(T.Consumer,null,(function(e){return r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"section container"},r.a.createElement("h2",{className:"is-title is-size-2 has-text-centered"},"Create a new vendor account"),r.a.createElement("div",{className:"section"},r.a.createElement(G,{vendor:!0,onRegister:function(t){return e.registerVendor(t)},redirectPath:"/",loginPath:"/vendor/login"}))))}))},Z=function(){var e=Object(n.useContext)(T),t=Object(n.useState)(!0),a=Object(i.a)(t,2),s=a[0],c=a[1];return e.signedIn()?(e.logout().then((function(){return c(!1)})),r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"section container"},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"hero is-fullheight"},r.a.createElement("div",{className:"hero-body"},r.a.createElement("h2",{className:"is-title is-size-2"},"Thank you for using ",e.name,"!"),s?r.a.createElement("progress",{className:"progress is-small is-info",max:"100"},"loading..."):null)))))):r.a.createElement(M.a,{to:"/"})},$=["Contacting Mothership...","Configuring Defences...","Loading..."],Q=function(){var e=Object(n.useContext)(T),t=Object(n.useState)($[Math.round(Math.random()*$.length)%$.length]),a=Object(i.a)(t,2),s=a[0],c=a[1],l=setInterval((function(){return c($[Math.round(Math.random()*$.length)%$.length])}),2e3);return Object(n.useEffect)((function(){return function(){clearInterval(l)}})),r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,{hideMenu:!0}),r.a.createElement("div",{className:"hero is-fullheight is-black is-bold"},r.a.createElement("div",{className:"hero-body has-text-centered"},r.a.createElement("div",{className:"container"},r.a.createElement("p",{className:"title has-text-weight-bold is-2"},"Welcome to ",e.name),r.a.createElement("p",{className:"subtitle"},e.description),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"subtitle"},s),r.a.createElement("progress",{className:"progress is-small is-info",max:"100"},"loading")))))},ee=a(35),te=function(){var e=Object(n.useContext)(T);return e.signedIn()?r.a.createElement("div",{style:e.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"section"}))):r.a.createElement(M.a,{to:"/"})},ae=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).context=void 0,a.state={deals:[],isLoading:!1},a}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.context.dealMan.getDeals().then((function(t){e.setState({deals:t})}))}},{key:"render",value:function(){var e=this,t=this.context,a=this.state,n=a.isLoading,s=a.deals;return r.a.createElement("div",{style:t.theme.main},r.a.createElement(V,null),r.a.createElement("div",{className:"container is-fluid"},r.a.createElement("div",{className:"section"},r.a.createElement("div",{className:"columns is-multiline"},s.map((function(e){return r.a.createElement("div",{key:e.id,className:"column is-3-widescreen is-4 is-12-mobile"},r.a.createElement(ne,{deal:e}))}))),r.a.createElement("div",{className:"container"},r.a.createElement("button",{type:"button",onClick:Object(u.a)(o.a.mark((function a(){var n;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({deals:s,isLoading:!0}),n=window.scrollY,a.t0=s.push,a.t1=s,a.t2=ee.a,a.next=7,t.dealMan.getDeals(s[s.length-1].id);case 7:a.t3=a.sent,a.t4=(0,a.t2)(a.t3),a.t0.apply.call(a.t0,a.t1,a.t4),e.setState({deals:Object(ee.a)(s),isLoading:!1}),window.scroll(window.scrollX,n);case 12:case"end":return a.stop()}}),a)}))),className:"button is-outlined is-primary is-uppercase is-fullwidth ".concat(n?"is-loading":"")},"Load More")))))}}]),t}(r.a.PureComponent);ae.contextType=T;var ne=function(e){var t=e.deal;Object(n.useContext)(T);return r.a.createElement("div",{className:"card is-unselectable"},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image is-16by9"},r.a.createElement("img",{src:t.cover||a(82),alt:"Placeholder image"}))),r.a.createElement("div",{className:"card-content has-text-centered"},r.a.createElement("p",{className:"title is-5"},t.title),r.a.createElement("p",{className:"subtitle is-6"},t.description),r.a.createElement("div",{className:"content"},r.a.createElement(D.b,{className:"button is-medium is-success is-outlined",to:"/deals/view/".concat(t.id)},r.a.createElement(F.f,null),"\xa0 Get Deal")),r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-6"},r.a.createElement(F.e,null)," ",t.author.CompanyName),r.a.createElement("p",{className:"subtitle tags"},r.a.createElement("span",{className:"tag ".concat(t.inStore?"is-primary":"is-link")},t.inStore?r.a.createElement(r.a.Fragment,null,r.a.createElement(z.l,null),"\xa0 instore"):r.a.createElement(r.a.Fragment,null,r.a.createElement(z.b,null),"\xa0 online")))))))},re=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(navigator.onLine),l=Object(i.a)(c,2),o=l[0],u=l[1],m=Object(I.useToasts)().addToast;return window.onoffline=function(){o&&(console.log("lagbaja"),u(!1),m("You are offline!",{appearance:"warning",autoDismiss:!1}))},window.ononline=function(){o||(u(!0),m(r.a.createElement("p",null,"Welcome back to the Internet \xa0",r.a.createElement(z.n,null)),{appearance:"info",autoDismiss:!1}))},r.a.createElement(T.Provider,{value:S},r.a.createElement(T.Consumer,null,(function(e){return e.isReady().then((function(e){return s(e)})),r.a.createElement(D.a,{basename:"/deals"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(M.d,null,r.a.createElement(M.b,{strict:!0,exact:!0,path:"deals/view/:id",component:U}),r.a.createElement(M.b,{strict:!0,exact:!0,path:A.deals,component:ae}),r.a.createElement(M.b,{strict:!0,exact:!0,path:A.myDeals,component:te}),r.a.createElement(M.b,{strict:!0,exact:!0,path:"/vendor/register",component:X}),r.a.createElement(M.b,{strict:!0,exact:!0,path:"/user/register",component:K}),r.a.createElement(M.b,{strict:!0,exact:!0,path:"/vendor/login",component:_}),r.a.createElement(M.b,{strict:!0,exact:!0,path:"/user/login",component:J}),r.a.createElement(M.b,{strict:!0,exact:!0,path:"/:user/logout",component:Z}),r.a.createElement(M.b,{strict:!0,exact:!0,path:"/",component:R}),r.a.createElement(M.b,{component:U})),r.a.createElement(W,null)):r.a.createElement(Q,null))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(I.ToastProvider,{placement:"bottom-center"},r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[49,1,2]]]);
//# sourceMappingURL=main.1c02cd26.chunk.js.map